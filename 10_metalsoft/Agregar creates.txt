CREATE VIEW "public"."viewpedidosconrecasignados" (
    nropedido,
    nropedidocotizacioncliente,
    razonsocial,
    prioridad,
    fechaentregaestipulada,
    idpedido,
    idcliente,
    idprioridad,
    presupuesto,
    idestado)
AS
SELECT pe.nropedido, pe.nropedidocotizacioncliente, cli.razonsocial, pri.nombre
    AS prioridad, pe.fechaentregaestipulada, pe.idpedido, cli.idcliente,
    pri.idprioridad, pe.presupuesto, pp.idestado
FROM pedido pe, planificacionproduccion pp, cliente cli, prioridad pri
WHERE pe.idpedido = pp.pedido AND cli.idcliente = pe.cliente AND
    pri.idprioridad = pe.prioridad AND pe.estado = 5;



CREATE VIEW "public"."viewcantidadmpenpedido" (
    pedido,
    idmateriaprima,
    cantidad)
AS
SELECT pe.idpedido AS pedido, dpp.idmateriaprima, sum(dpp.cantmateriaprima) AS cantidad
FROM pedido pe, detalleproductopresupuesto dpp, presupuesto pre, detallepresupuesto dp
WHERE pe.presupuesto = pre.idpresupuesto AND dp.idpresupuesto =
    pre.idpresupuesto AND dp.iddetalle = dpp.iddetallepresupuesto
GROUP BY pe.idpedido, dpp.idmateriaprima;