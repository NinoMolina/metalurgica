/*
 * PllaConsultaDetalle.java
 *
 * Created on 6 de agosto de 2008, 12:09
 */

package pkgCasosDeUso.pkgCompras.RegistrarPedidoProveedor;

import pkgClasesDeNegocio.CuentaCorriente.RepresentanteDeProveedor;
import pkgRecursosDeSoporte.Pantalla;
import java.util.Date;
import pkgClasesDeNegocio.Compras.DetallePedidoAProveedor;
import pkgRecursosDeSoporte.ValText;
import pkgRecursosDeSoporte.pkgLista.Iterador;

/**
 *
 * @author  Armando
 */
public class PllaConsultaDetalle extends javax.swing.JDialog {
    
    private GestorRegistrarPedidoProveedor gestor;
    private String nomRepresentante;
    private Date fechaPedido;
    private Date fechaRecepcion;
    
    
    
    
    /** Creates new form PllaConsultaDetalle */
    public PllaConsultaDetalle() {
        initComponents();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jSPDetallePedido = new javax.swing.JScrollPane();
        tblDetallePedido = new javax.swing.JTable();
        lblMontoTotal = new javax.swing.JLabel();
        lblValorMontoTotal = new javax.swing.JLabel();
        btnAceptar = new javax.swing.JButton();
        lblProveedor = new javax.swing.JLabel();
        lblProveedorSeleccionado = new javax.swing.JLabel();
        lblRepresentanteDeProveedor = new javax.swing.JLabel();
        lblRepresentanteDeProveedorSeleccionado = new javax.swing.JLabel();
        lblFechaPedido = new javax.swing.JLabel();
        lblValorFechaPedido = new javax.swing.JLabel();
        lblFechaRecepcion = new javax.swing.JLabel();
        lblValorFechaRecepcion = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Detalle de Pedido");
        setResizable(false);

        jSPDetallePedido.setBorder(javax.swing.BorderFactory.createTitledBorder("Detalle de Productos"));

        tblDetallePedido.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null}
            },
            new String [] {
                "N°", "Producto", "Unidad", "Cantidad", "Precio Unitario", "Precio Total"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.Integer.class, java.lang.String.class, java.lang.String.class, java.lang.Double.class, java.lang.Double.class, java.lang.Double.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jSPDetallePedido.setViewportView(tblDetallePedido);

        lblMontoTotal.setFont(new java.awt.Font("Tahoma", 1, 12));
        lblMontoTotal.setText("MONTO TOTAL ($):");

        lblValorMontoTotal.setFont(new java.awt.Font("Tahoma", 1, 12));
        lblValorMontoTotal.setText("0");
        lblValorMontoTotal.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        btnAceptar.setText("Aceptar");
        btnAceptar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAceptarActionPerformed(evt);
            }
        });

        lblProveedor.setFont(new java.awt.Font("Tahoma", 1, 12));
        lblProveedor.setText("Proveedor:");

        lblProveedorSeleccionado.setFont(new java.awt.Font("Tahoma", 0, 12));
        lblProveedorSeleccionado.setText("<<Nom_Proveedor>>");

        lblRepresentanteDeProveedor.setFont(new java.awt.Font("Tahoma", 1, 12));
        lblRepresentanteDeProveedor.setText("Representante de Proveedor:");

        lblRepresentanteDeProveedorSeleccionado.setFont(new java.awt.Font("Tahoma", 0, 12));
        lblRepresentanteDeProveedorSeleccionado.setText("<<nom_Representante>>");

        lblFechaPedido.setFont(new java.awt.Font("Tahoma", 1, 12));
        lblFechaPedido.setText("Fecha Pedido:");

        lblValorFechaPedido.setFont(new java.awt.Font("Tahoma", 0, 12));
        lblValorFechaPedido.setText("<<fecha_Pedido>>");

        lblFechaRecepcion.setFont(new java.awt.Font("Tahoma", 1, 12));
        lblFechaRecepcion.setText("Fecha Recepción:");

        lblValorFechaRecepcion.setFont(new java.awt.Font("Tahoma", 0, 12));
        lblValorFechaRecepcion.setText("<<fecha_Recepcion>>");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lblProveedor, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblProveedorSeleccionado, javax.swing.GroupLayout.PREFERRED_SIZE, 174, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lblRepresentanteDeProveedor, javax.swing.GroupLayout.PREFERRED_SIZE, 193, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblRepresentanteDeProveedorSeleccionado, javax.swing.GroupLayout.PREFERRED_SIZE, 213, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lblFechaPedido, javax.swing.GroupLayout.PREFERRED_SIZE, 96, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblValorFechaPedido, javax.swing.GroupLayout.PREFERRED_SIZE, 123, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(22, 22, 22)
                        .addComponent(lblFechaRecepcion, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblValorFechaRecepcion, javax.swing.GroupLayout.PREFERRED_SIZE, 148, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jSPDetallePedido, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 636, Short.MAX_VALUE)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lblMontoTotal, javax.swing.GroupLayout.PREFERRED_SIZE, 132, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblValorMontoTotal, javax.swing.GroupLayout.PREFERRED_SIZE, 142, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 239, Short.MAX_VALUE)
                        .addComponent(btnAceptar, javax.swing.GroupLayout.PREFERRED_SIZE, 117, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblProveedor)
                    .addComponent(lblProveedorSeleccionado))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblRepresentanteDeProveedor)
                    .addComponent(lblRepresentanteDeProveedorSeleccionado))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblFechaPedido)
                    .addComponent(lblValorFechaPedido)
                    .addComponent(lblFechaRecepcion)
                    .addComponent(lblValorFechaRecepcion))
                .addGap(18, 18, 18)
                .addComponent(jSPDetallePedido, javax.swing.GroupLayout.PREFERRED_SIZE, 198, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblMontoTotal)
                    .addComponent(lblValorMontoTotal)
                    .addComponent(btnAceptar))
                .addContainerGap(40, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnAceptarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAceptarActionPerformed
       this.dispose();
    }//GEN-LAST:event_btnAceptarActionPerformed
    
    public void abrirVentana(GestorRegistrarPedidoProveedor gestor){
      this.gestor=gestor;
     
      //Pantalla.insertarIcono(this,"D:/Facultad/5A�oK1/ProyectoFinal/Iteracion1/4. 1� Iteraci�n/Interfaces/PrjModuloCompras/Imagenes/logoestacion.gif");
      Pantalla.centrarEnPantallaJDialog(this);
     
      this.cargarDatosPedido();
      
      this.setModal(true);
      this.setVisible(true);
    
    }
    
    private void cargarDatosPedido(){
      
        this.lblProveedorSeleccionado.setText(gestor.getProveedor().getRazonSocial());
        this.lblRepresentanteDeProveedorSeleccionado.setText(nomRepresentante);
        
        this.lblValorFechaPedido.setText(ValText.getFormatStringFecha(fechaPedido));
        this.lblValorFechaRecepcion.setText(ValText.getFormatStringFecha(fechaRecepcion));
        
        this.mostrarDetalles();
    
    }
    
    private void mostrarDetalles(){
        Iterador itDetalles=this.gestor.getDetallesPedido().crearIterador();
        
        int nro=1;
        int fila=0;
        while(itDetalles.siguiente()){
          
            DetallePedidoAProveedor dlle=(DetallePedidoAProveedor) itDetalles.getElementoActual();
            
            this.tblDetallePedido.setValueAt(new Integer(nro),fila,0);
            this.tblDetallePedido.setValueAt(dlle.getProducto().getNombre(),fila,1);
            this.tblDetallePedido.setValueAt(dlle.getProducto().getUnidad(),fila,2);
            this.tblDetallePedido.setValueAt(new Double(dlle.getCantidad()), fila,3);
            this.tblDetallePedido.setValueAt(new Double(dlle.getPrecioActual()),fila,4);
            this.tblDetallePedido.setValueAt(new Double(dlle.getPrecioTotal()),fila,5);
        
            nro++;
            fila++;
        }
        
        this.lblValorMontoTotal.setText(ValText.getStringDouble(this.gestor.getPedidoAProveedor().getMontoTotal()));
        
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAceptar;
    private javax.swing.JScrollPane jSPDetallePedido;
    private javax.swing.JLabel lblFechaPedido;
    private javax.swing.JLabel lblFechaRecepcion;
    private javax.swing.JLabel lblMontoTotal;
    private javax.swing.JLabel lblProveedor;
    private javax.swing.JLabel lblProveedorSeleccionado;
    private javax.swing.JLabel lblRepresentanteDeProveedor;
    private javax.swing.JLabel lblRepresentanteDeProveedorSeleccionado;
    private javax.swing.JLabel lblValorFechaPedido;
    private javax.swing.JLabel lblValorFechaRecepcion;
    private javax.swing.JLabel lblValorMontoTotal;
    private javax.swing.JTable tblDetallePedido;
    // End of variables declaration//GEN-END:variables

    public void setRepresentante(String representante) {
        this.nomRepresentante = representante;
    }

    public void setFechaPedido(Date fechaPedido) {
        this.fechaPedido = fechaPedido;
    }

    public void setFechaRecepcion(Date fechaRecepcion) {
        this.fechaRecepcion = fechaRecepcion;
    }
    
}
